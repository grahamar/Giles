@(projectAndBuilds: dao.ProjectAndBuilds, loginForm: Form[Option[dao.User]])(implicit flash: Flash, currentUser: Option[dao.User])

@main("", loginForm) {
<div class="container" style="margin-top: 20px;">
    <div class="jumbotron">
        <div class="container">
            <h1>@projectAndBuilds.project.name</h1>
            <p>@if(!projectAndBuilds.project.authors.isEmpty){
            (@{Html(projectAndBuilds.project.authors.map { author =>
            val authorProfileLink = routes.Application.profile(author.username).toString
            <a class="text-primary" href={authorProfileLink}>{author.username}</a>
            }.mkString(", "))})
            }</p>
        </div>
    </div>
    <div>
        @helper.form(action=routes.Application.searchProject(projectAndBuilds.project.slug), 'class -> "rtm-search form-search", 'role -> "form") {
        <div class="input-group">
            <input type="search" id="searchbox" class="search-query input-lg form-control" name="projectFilter" placeholder="Search @projectAndBuilds.project.name">
            <span class="input-group-btn">
                <button id="searchsubmit" class="btn btn-lg btn-primary" type="submit">
                    <span class="glyphicon glyphicon-search"></span>
                </button>
            </span>
        </div>
        }
    </div>
    <h3>Description</h3>
    <p><!--TODO Project Description--></p>
    <span class="divider col-md-1" style="margin-bottom: 20px;"></span>
    <div>
        <div class="col-md-9">
            <form class="form-inline" role="form" style="margin-bottom: 20px;">
                <div class="form-group">
                    <label class="sr-only" for="version">Build a version</label>
                    <select id="version" class="form-control">
                        @projectAndBuilds.builds.map { build =>
                        <option>@build.version.versionName</option>
                        }
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Re-Build</button>
                <a href='@routes.ProjectController.pullNewVersions(projectAndBuilds.project.slug)' class="btn btn-info">Pull New Versions</a>
            </form>
            <div class="well">
                <table class="table table-bordered">
                    <tbody>
                        @projectAndBuilds.builds.map { build =>
                        <tr class="project">
                            <td>
                                @build.startPage.map { startPage =>
                                <a href='@routes.ProjectController.projectDocs(projectAndBuilds.project.slug, build.version.versionName, startPage)'>
                                    <strong>@build.version.versionName</strong>
                                </a>
                                }.getOrElse {
                                <strong>@build.version.versionName</strong>
                                }
                                @{build.status match {
                                  case dao.BuildFailure =>
                                    <span class="text-danger" style="padding-left: 2px;">(Build Failed)</span>
                                    <p class="text-danger">{build.message}</p>
                                  case _ =>
                                }}
                            </td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-3">
            <!--TODO Project Details go here-->
        </div>
    </div>
</div>
}